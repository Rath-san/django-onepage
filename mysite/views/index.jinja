<!DOCTYPE html>
<html lang="en">
{% include './components/head.jinja' %}

<body>
    {% include './components/nav.jinja' %}
    {# {% include './components/macro.jinja' %} #}
    {# {% include './components/bundle-popup.jinja' %} #}

    {% macro picture(
		media_url,
		filename,
		media_files={
            '(max-width: 1024px)': {
                'filename': "",
                'formats':['webp','jpg'],
                'file_sizes': [640, 960, 1024],
            }
        },
		file_sizes=[360, 480, 640, 960],
		formats=['webp','jpg'],
		media_sizes='',
		media='',
		alt='',
		img_class='',
		img_style='',
		picture_class='',
		width='',
		height='',
        loading='',
        data_src=False
	) %}
		<picture class="{{ picture_class }}">
			{% for media in media_files %}
				{% set m = media_files[media] %}
				{% for format in formats %}
					<source
                        {% if data_src %}
                            data-srcset="
                                {% for size in m['file_sizes'] %}
                                    {{ media_url }}/{{ m['filename'] }}-{{ size }}.{{ format }} {{size}}w,
                                {% endfor %}"
                        {% else %}
                            srcset="
                                {% for size in m['file_sizes'] %}
                                    {{ media_url }}/{{ m['filename'] }}-{{ size }}.{{ format }} {{size}}w,
                                {% endfor %}"
                        {% endif %}
						type="image/{{ format | replace('jpg', 'jpeg') }}"
						sizes="{{ m['media_sizes'] | default(media_sizes) }}"
						media="{{ media }}"
					>
				{% endfor %}
			{% endfor %}
			{% for format in formats %}
				<source
                    {% if data_src %}
                    data-srcset="
						{% for size in file_sizes %}
							{{ media_url }}/{{ filename }}-{{ size }}.{{ format }} {{size}}w,
						{% endfor %}"
                    {% else %}
                    srcset="
						{% for size in file_sizes %}
							{{ media_url }}/{{ filename }}-{{ size }}.{{ format }} {{size}}w,
						{% endfor %}"
                    {% endif %}
					type="image/{{ format | replace('jpg', 'jpeg') }}"
					sizes="{{ media_sizes }}"
					media="{{ media }}">
			{% endfor %}
			<img
                {% if data_src %}
                    data-src="{{ media_url }}/{{ filename }}-{{ file_sizes[0] }}.{{ formats[-1] }}?{{file_version}}"
                {% else %}
                    src="{{ media_url }}/{{ filename }}-{{ file_sizes[0] }}.{{ formats[-1] }}?{{file_version}}"
                {% endif %}
				alt="{{alt}}"
				class="{{img_class}}"
				style="{{img_style}}"
				width="{{width}}"
				height="{{height}}"
                loading="{{loading}}"
                >

		</picture>
	{% endmacro %}

    {% set srcsetSizesMobile = [
        640,
        960
    ] %}

    {% set srcsetSizesDesktop = [
        1280,
        1920,
        2560
     ] %}

     {% set srcsetSizes = srcsetSizesMobile + srcsetSizesDesktop %}

    {% set template_id = '1401' %}
    {% set file_version = 3 %}
    
    {% set media_prefix = 'mCounter' %}
    {% set media_url = 'https://s3.motionvfx.com/mvfxpublic/products/templates/%s/media' % (template_id) %}
    {% set placeholder_url = 'https://via.placeholder.com' %}

    {% set data = {
        'header': {
            'subtitle': 'Animated mockups collection for Final Cut Pro'
        },
        'trailer': {
            'subtitle': 'SEE THEM AT WORK!',
            'title': 'Watch trailer',
            'text': 'View the presets in action and watch them create a unique visual form of the ideas you want to realize.'
        },
        'tutorial': {
            'subtitle': 'LEARN THE WORKFLOW!',
            'title': 'Watch tutorial',
            'text': 'Check our full guide that will make you benefit from what mTutorial has to offer!'
        },
        'counters': {
            'subtitle': 'ILLUSTRATE DIVERSE CONCEPTS & BRING YOUR IDEAS TO LIFE',
            'title': 'Support your favorite artists',
            'text': 'This collection of handy, pre-animated elements lets you build a whole layout to illustrate your videos and enrich your edits. Attract donators, supporters, and clients, and raise enough money to accomplish the goal.'
        },
        'slider': {
            'subtitle': 'ILLUSTRATE DIVERSE',
            'title': 'Establish a successful donation campaign',
            'texts': [
                "Illustrate your project with astonishing design and animation.",
                "Tell your story in a cinematic way and stun your clients.",
                "Customize every detail to perfectly fit your company’s character."
            ]
        },
        'footer': {
            'subtitle': 'ILLUSTRATE DIVERSE',
            'title': 'Turn your ideas into reality!',
            'text': 'Modern times give us many opportunities to carry out various projects and realize our dreams and ideas. The well-crafted design of mDonate gives your campaign a unique look and makes it stand out to help you get where you want to be and make a lasting impression on your patrons.'
        }
    } %}

    {% set trailer_id = 'o5YUZ38JEjE' %}
    {% set tutorial_id = '8lZ_cwQ-XHU' %}

    <main>
        <section class="header">
            <div class="image__background">
                {{picture(
                    media_url=media_url,
                    filename= media_prefix + '_top' ,
                    file_sizes=srcsetSizes,
                    media_files={},
                    formats=['webp','jpg'],
                    width=2560,
                    height=960,
                    alt="Header image",
                )}}
            </div>
            <div class="container-fluid">
                <div class="section__content">
                    <div class="header__logo">
                        {{picture(
                            media_url=media_url,
                            filename= media_prefix + '_logo' ,
                            file_sizes=[1200,600,300],
                            media_files={},
                            formats=['webp','png'],
                            width=1200,
                            height=603,
                            img_class='',
                            alt="Logo",
                        )}}
                        <h2 hidden class="">mMockup</h2>
                    </div>

                    <h1 class="section__text">
                        {% autoescape off %} {{product.head_info}} {% endautoescape %}
                    </h1>
                </div>
            </div>
        </section>

        <script>
            const onHeaderImagesLoaded = (images, type= 'primary') => {
                const loadedImages = images.map(img => false);
                images.forEach((img, idx) => {
                    loadedImages[idx] = img.complete;

                    if (loadedImages.every(val => val)) {
                        header.classList.add(`loaded-${type}`)
                    }
                    img.onload = () => {
                        loadedImages[idx] = true
                        if (loadedImages.every(val => val)) {
                            header.classList.add(`loaded-${type}`)
                        }
                    }
                })
            }

            const header = document.querySelector('section.header')
            const items1 = [
                header.querySelector('.header__logo img'),
            ]

            const items2 = Array.from(header.querySelectorAll('.image__background img'));

            onHeaderImagesLoaded(items1);
            onHeaderImagesLoaded(items2, 'secondary');
        </script>

        <div class="scroll-prompt" style="--h-index: 2; opacity: 0;">
            <a class="scroll-to-btn" href="#" onclick="scrollToAnchor('trailer');" tabindex="-1"></a>
        </div>

        <a class="nav" name="trailer"></a>

        <section class="video trailer">
            <div class="container">
                <div class="row">
                    <div class="col">
                        <div class="section__content">
                            <div class="section__head">
                                <p class="section__subtitle">
                                    {{data.trailer.subtitle|safe}}
                                </p>
                                <div class="section__title">
                                    {{data.trailer.title|safe}}
                                </div>
                                <p class="section__text">
                                    {{data.trailer.text|safe}}
                                </p>
                            </div>
                        </div>
                        
                        <div class="yt embed-responsive embed-responsive-16by9">
                            <div id="videoTrailer" data-id="{{trailer_id}}" style="background-color: #000"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <a class="nav" name="tutorial"></a>

        <section class="video tutorial">
            <div class="container text-center">
                <div class="row">
                    <div class="col-12">
                        <div class="section__content">
                            <div class="section__head">
                                <p class="section__subtitle " style="--s-index:0;">
                                    {{data.tutorial.subtitle|safe}}
                                </p>
                                <div class="section__title ">
                                    {{data.tutorial.title|safe}}
                                </div>
                                <p class="section__text " style="--s-index:2;">
                                    {{data.tutorial.text|safe}}
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="yt embed-responsive embed-responsive-16by9">
                            <div id="videoTutorial" data-id="{{tutorial_id}}" style="background-color: #000"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="counters bg--dark">
            {% set counters = [
                {
                    "src": "_18"
                },
                {
                    "src": "_07"
                },
                {
                    "src": "_08"
                },
                
            ] %}
            <div class="comp ">
                {% for c in counters %}
                    <video autoplay playsinline loop muted src="{{ media_url }}/{{ media_prefix + c.src }}.mp4"></video>
                {% endfor %}
            </div>
            <div class="section__content">
                <div class="section__head">
                    <p class="section__subtitle">
                        {{ data.counters.subtitle }}
                    </p>
                    <h2 class="section__title">
                        {{ data.counters.title }}
                    </h2>
                    <p class="section__text section__text--inset">
                        {{ data.counters.text }}
                    </p>
                </div>
            </div>
        </section>

        <section class="slider">
            {% set magicSlides = [
                {
                    "src": "_s2",
                    "alt": "",
                },
                {
                    "src": "_s3",
                    "alt": "",
                },
                {
                    "src": "_s4",
                    "alt": "",
                },
                {
                    "src": "_s5",
                    "alt": "",
                },
                {
                    "src": "_s6",
                    "alt": "",
                },
                {
                    "src": "_s7",
                    "alt": "",
                },
                {
                    "src": "_s8",
                    "alt": "",
                },
                {
                    "src": "_s9",
                    "alt": "",
                },
                {
                    "src": "_s10",
                    "alt": "",
                }
            ] %}
            <div class="magicSlider">
				<div class="slides">
                    {% for ms in magicSlides %}
                        <div class="slide">
                            {{ picture(
                                media_url=media_url,
                                filename= media_prefix + ms.src ,
                                file_sizes=[450, 900, 1800],
                                media_files={},
                                formats=['webp','jpg'],
                                width=1000,
                                height=1000,
                                media_sizes="50w",
                                alt=ms.alt,
                            )}}
                        </div>
                    {% endfor %}
				</div>
				<div class="scroll-area scroll-area-left"></div>
				<div class="scroll-area scroll-area-right"></div>
			</div>
            <div class="container">
                <div class="row">
                    <div class="col-12 section__content">
                        <div class="section__head">
                            <p class="section__subtitle">
                                {{ data.slider.subtitle }}
                            </p>
                            <h2 class="section__title">
                                {{ data.slider.title }}
                            </h2>
                        </div>
                    </div>
                    <div class="col-10 offset-1 texts">
                        {% for t in data.slider.texts %}
                            <p class="section__text">{{ t }}</p>
                        {% endfor %}
                    </div>
                </div>
            </div>
            
        </section>

        <section class="prevs center bg--dark">
            {% set productPageTemplateId = '1393' %} 
            {% set collapseAfter = 8 %}
            {% set namePrefix = '' %}
            {% set categories = [
                    { 'key':'effect', 'label': 'Effects', 'count': 4},
                    
                ]
            %}

            {# { 'key':'basic', 'label': 'Basic', 'count': 25},
                    { 'key':'box', 'label': 'Box', 'count': 6},
                    { 'key':'computer', 'label': 'Computer', 'count': 15},
                    { 'key':'custom', 'label': 'Custom', 'count': 9},
                    { 'key':'isometric', 'label': 'Isometric', 'count': 13},
                    { 'key':'laptop', 'label': 'Laptop', 'count': 11},
                    { 'key':'smartphone', 'label': 'Smartphone', 'count': 14},
                    { 'key':'typography', 'label': 'Typography', 'count': 5},
                    { 'key':'background', 'label': 'Backgrounds', 'count': 12}, #}
            
            <div class="container">
                <div class="row">
                    <div class="col-12 text-center">
                        <div class="section__content">
                            <div class="section__head">
                                <h2 class="section__title">
                                    <span class="deco"></span>
                                    <span>A collection of</span><span class="section__display"> 20 </span><span>useful counters</span>
                                </h2>
                                <p class="section__subtitle">
                                    hover or tap to preview animations
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="product-prev-grid" class="product-prev-grid container">
    			{% for category in categories %}
					{% set key = category.key %}
					{% if categories|length > 1 %}
                        <p class="h3 prevs__title text-center">{{ category.label }}</p>
                    {% endif %}
					<div class=" row {{ category.rowClass | default('') }} {% if category.count == 5 %}row-5{% endif %}" >
						{% for i in range(category.count) %}
							{% set num = '%02d' % loop.index %}
							{% set filename = 'https://s3.motionvfx.com/mvfxpublic/products/templates/' + productPageTemplateId + '/media/' + namePrefix + key +  '_' + num %}
							<div class="
                                prev-card
                                product-prev-col
                                col-6
                                {# {% if key == 'subtitles' or key == 'typography' %}col-lg-4{% else %}col-lg-3{% endif %} #}
                                col-lg-3
                                {% if loop.index > collapseAfter %}collapse prev-collapse-{{ key }}{% endif %}
                            " id="prev-collapse-{{ key }}-{{ loop.index }}">
								<div class="product-prev-cell" data-mp4-src="{{ filename }}.mp4?{{file_version}}" style="--s-index: {{loop.index % 5}}" >
									<img loading="lazy"
                                        src="{{ filename }}-640.jpg?{{file_version}}"
                                        {# src="{{placeholder_url}}/400x225/eeaaff" #}
                                        alt="" width="400" height="225" />
									<div class="loading-spinner"></div>
								</div>
							</div>
						{% endfor %}
						{% if category.count > collapseAfter %}
							<div class="col-btn-collapse">
								<button class="btn-collapse" type="button" data-target=".prev-collapse-{{ key }}" aria-expanded="false" aria-controls="{% for j in range(collapseAfter, category.count) %} prev-collapse-{{ key }}-{{ j }} {% endfor %}">
									<span><span class="label-collapsed">Show more</span><span class="label-expanded">Collapse</span> ({{ category.count - collapseAfter }})</span>
									<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
											viewBox="0 0 36.6 61.5" style="enable-background:new 0 0 36.6 61.5;" xml:space="preserve" class="btn-collapse-arrow" height="20">
										<style type="text/css">
											.st0{fill:none;stroke:currentColor;stroke-width:8;stroke-miterlimit:10;}
										</style>
										<polyline class="st0" points="2.8,58.6 30.9,30.5 3.2,2.8 "/>
									</svg>
								</button>
							</div>
						{% endif %}
					</div>
				{% endfor %}
            </div>
        </section>

        <section class="prevs-after bg--dark">
            <div class="comp">
                {{picture(
                    media_url=media_url,
                    filename= media_prefix + '_rowers' ,
                    file_sizes=[325,750,1500],
                    media_files={},
                    formats=['webp','jpg'],
                    width=535,
                    height=803,
                    alt="Rowers on water",
                    img_class="rowers"
                )}}

                {{picture(
                    media_url=media_url,
                    filename= media_prefix + '_20' ,
                    file_sizes=[250, 500],
                    media_files={},
                    formats=['webp','png'],
                    width=357,
                    height=137,
                    alt="Counter 20",
                    img_class="counter"
                )}}
            </div>
            <div class="section__content">
                <div class="section__head">
                    <p class="section__subtitle">
                        ILLUSTRATE DIVERSE
                    </p>
                    <h2 class="section__title">
                        Establish a successful donation campaign
                    </h2>
                    <p class="section__text section__text--inset">
                        Check our full guide that will make you benefit from what mTutorial has to offer!
                    </p>
                </div>
            </div>
        </section>

        <a class="nav" href="#" name="specs" rel="noopener noreferrer"></a>

        <div class="ts-mi">
            <section class="tech-spec">
                <div class="container">
                    <div class="row">
                        <div class="col-12">
                            <div class="tech-spec-info">
                                <div class="section__text__content">
                                    <div class="section__head">
                                        <div class="section__title tech-spec__title section__title">
                                            Technical specifications
                                        </div>
                                    </div>
                                    <div class="ttable tech-spec__table">
                                        <div class="tcell tlabel">Supported software</div>
                                        <div class="tcell tdata">
                                            <h3 class="p">
                                                {% autoescape off %}
                                                    {{ product.productdetails.minimal_requirements.replace('FCP 10', 'FCP 10').replace('Motion 5', 'Motion 5').replace(', ', ',<br>') }}
                                                {% endautoescape %}
                                            </h3>
                                        </div>
                                        <div class="tcell tlabel">Includes</div>
                                        <div class="tcell tdata">
                                            <h3 class="p">
                                                <span>114 titles</span>
                                            </h3>
                                        </div>
                                        <div class="tcell tlabel">Size</div>
                                        <div class="tcell tdata">
                                            {{ "%.0f MB"|format(product.productdetails.source_size / 1000) }}
                                        </div>
                                        {% for kind in ['trailer', 'tutorial'] %}
                                            {% with musics=product.productdetails.music.select_related('music_portal').all().filter(used_in_trailer=kind=='trailer') %}
                                                {% if musics|length %}
                                                    <div class="tcell tlabel">Music used in {{ kind }}</div>
                                                    <div class="tcell tdata">
                                                        {% include 'product/music_info.jinja2' %}
                                                    </div>
                                                {% endif %}
                                            {% endwith %}
                                        {% endfor %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
            </section>

            <section class="minstaller__section">
                <div class="container">
                    <div class="row">
                        <div class="col">
                            <div class="minstaller">
                                <div class="minstaller__title">mInstaller</div>
                                <p class="minstaller__description">
                                    After purchasing, the product is <b>instantly available </b>for download via <a href="https://www.motionvfx.com/page/minstaller.html" target="_blank" rel="noopener noreferrer">mInstaller</a>.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        {# media_files={
                        '(max-width: 960px)': {
                            'filename': media_prefix + '_footer_mobile',
                            'formats':['jpg'],
                            'file_sizes': [640, 960],
                        }
                    }, #}

        <footer class="footer">
            <div class="image__background " style="--s-index:0">
                {{picture(
                    media_url=media_url,
                    filename= media_prefix + '_footer',
                    file_sizes=srcsetSizes,
                    media_files={},
                    formats=['webp','jpg'],
                    width=2560,
                    height=1100,
                    data_src=True,
                    img_class='lazy-show',
                    alt="Footer"
                )}}
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="section__text__content">
                            <div class="section__head">
                                <p class="section__subtitle">
                                    {{data.footer.subtitle|safe}}
                                </p>
                                <div class="section__title">
                                    {{data.footer.title|safe}}
                                </div>
                                <p class="footer__text section__text ">
                                    {{ data.footer.text }}
                                </p>
                            </div>
                            <div class="button-buy">
                                {% with discount_text="INTRO", version=2 %}
                                    {% include "product/buy_button.jinja2" %}
                                {% endwith %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
    </main>

    {# {% include './components/popup-left.jinja' %} #}
    {% include './components/submenu.jinja' %}
    
    <script src="https://s3.motionvfx.com/mvfxpublic/products/templates/1329/js/gsap.min.js"></script>
    <script src="https://s3.motionvfx.com/mvfxpublic/products/templates/1329/js/morpher.min.js"></script>
    
    <script src="dist/scripts.js"></script>
    <script src="scripts/vendor/menu.js" defer></script>
    <script src="scripts/vendor/scroll_to_anchor.js" defer></script>
</body>

</html>
